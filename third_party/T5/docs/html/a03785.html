<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tilt Five NDK</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="t5_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Tilt Five NDK
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('a03785.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Getting Started : C </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="cFiles"></a>
Project Setup</h1>
<p >The following files need to be included in your project </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">File(s)   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">.h files from the <code>include</code> directory   </td><td class="markdownTableBodyNone">C header files for the API    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">One of the libraries from <code>lib</code> directory   </td><td class="markdownTableBodyNone">The Tilt Five NDK support library   </td></tr>
</table>
<h1><a class="anchor" id="cHowTo"></a>
Using the Glasses</h1>
<h2><a class="anchor" id="cServiceConnection"></a>
Service Connection</h2>
<p >Most of the operations performed with the glasses are not done directly by the client, but are performed by the Tilt Five™ service on behalf of the client.</p>
<p >The connection to the service is not guaranteed to always be available. Scenarios where the service is unavailable include:</p><ul>
<li>During client startup there can be a small delay before the connection is established.</li>
<li>The service is not installed (e.g. User hasn't installed the Tilt Five™ drivers).</li>
<li>The service may have crashed or been stopped by a user. As such, all queries should anticipate a response of <a class="el" href="a00029.html#ga6d6444b975764859a1deab3a44f8da27" title="Service isn&#39;t connected.">T5_ERROR_NO_SERVICE</a> and retry appropriately (assuming it's a transient condition).</li>
</ul>
<p >A trivial example of handling this is shown below: </p><div class="fragment"><div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>    <span class="keywordtype">bool</span> waiting = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        <span class="keywordtype">char</span> serviceVersion[<a class="code hl_define" href="a00042.html#ga1b3b29732a2474ff4402ff61d29a3f21">T5_MAX_STRING_PARAM_LEN</a>];</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>        <span class="keywordtype">size_t</span> bufferSize = <a class="code hl_define" href="a00042.html#ga1b3b29732a2474ff4402ff61d29a3f21">T5_MAX_STRING_PARAM_LEN</a>;</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>        err               = <a class="code hl_function" href="a00034.html#ga23bfad64e86cbd00442d9eb44362ccfa">t5GetSystemUtf8Param</a>(</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>            t5ctx, <a class="code hl_enumvalue" href="a00042.html#gga8461e4e8585f0bedb85c4a555ee1c7d1a5ef3b1249be4b2b5f57ebfd28090b002">kT5_ParamSys_UTF8_Service_Version</a>, serviceVersion, &amp;bufferSize);</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>        <span class="keywordflow">if</span> (!err) {</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>            printf(<span class="stringliteral">&quot;Service version : %s\n&quot;</span>, serviceVersion);</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>        }</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span> </div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>        <span class="keywordflow">if</span> (err == <a class="code hl_define" href="a00029.html#ga6d6444b975764859a1deab3a44f8da27">T5_ERROR_NO_SERVICE</a>) {</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>            <span class="keywordflow">if</span> (!waiting) {</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>                printf(<span class="stringliteral">&quot;Waiting for service...\n&quot;</span>);</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>                waiting = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>            }</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>            printf(<span class="stringliteral">&quot;Error getting service version : %s\n&quot;</span>, <a class="code hl_function" href="a00029.html#ga636fd5ec34e9f752d1f7ba5fbd89b636">t5GetResultMessage</a>(err));</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>            exit(EXIT_FAILURE);</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>        }</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>    }</div>
<div class="ttc" id="aa00029_html_ga636fd5ec34e9f752d1f7ba5fbd89b636"><div class="ttname"><a href="a00029.html#ga636fd5ec34e9f752d1f7ba5fbd89b636">t5GetResultMessage</a></div><div class="ttdeci">T5_EXPORT const char * t5GetResultMessage(T5_Result result)</div></div>
<div class="ttc" id="aa00029_html_ga6d6444b975764859a1deab3a44f8da27"><div class="ttname"><a href="a00029.html#ga6d6444b975764859a1deab3a44f8da27">T5_ERROR_NO_SERVICE</a></div><div class="ttdeci">#define T5_ERROR_NO_SERVICE</div><div class="ttdoc">Service isn't connected.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00072">errors.h:72</a></div></div>
<div class="ttc" id="aa00034_html_ga23bfad64e86cbd00442d9eb44362ccfa"><div class="ttname"><a href="a00034.html#ga23bfad64e86cbd00442d9eb44362ccfa">t5GetSystemUtf8Param</a></div><div class="ttdeci">T5_EXPORT T5_Result t5GetSystemUtf8Param(T5_Context context, T5_ParamSys param, char *buffer, size_t *bufferSize)</div><div class="ttdoc">Get a system-wide UTF-8 encoded string parameter.</div></div>
<div class="ttc" id="aa00042_html_ga1b3b29732a2474ff4402ff61d29a3f21"><div class="ttname"><a href="a00042.html#ga1b3b29732a2474ff4402ff61d29a3f21">T5_MAX_STRING_PARAM_LEN</a></div><div class="ttdeci">#define T5_MAX_STRING_PARAM_LEN</div><div class="ttdoc">The maximum number of characters allowed for string values.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00038">types.h:38</a></div></div>
<div class="ttc" id="aa00042_html_gga8461e4e8585f0bedb85c4a555ee1c7d1a5ef3b1249be4b2b5f57ebfd28090b002"><div class="ttname"><a href="a00042.html#gga8461e4e8585f0bedb85c4a555ee1c7d1a5ef3b1249be4b2b5f57ebfd28090b002">kT5_ParamSys_UTF8_Service_Version</a></div><div class="ttdeci">@ kT5_ParamSys_UTF8_Service_Version</div><div class="ttdoc">Version of the service software - UTF8.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00431">types.h:431</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="cThreading"></a>
Threading</h2>
<p >All calls are blocking, and their thread safety is documented on each call. Generally, calls are grouped into a number of groups. From each group only one function should should be called concurrently. Calls may be made to functions in different groups concurrently. Additionally, some calls require specific threads (such as graphics related functions like <a class="el" href="a00037.html#ga70bdcf9addeae0c11274bb106c6c86df" title="Initialize the graphics context to enable sending rendered frames to the glasses.">t5InitGlassesGraphicsContext()</a> and <a class="el" href="a00037.html#ga6aaa32c766446663d172c20bc8e809eb" title="Send a frame to display on the glasses.">t5SendFrameToGlasses()</a>).</p>
<h2><a class="anchor" id="cOperations"></a>
Operations</h2>
<p >Depending on the level of access required to the API, there are one or more setup steps. Details are shown below with example code. Further details of the API are here documented in the <a class="el" href="a00031.html">Tilt Five™ Native Interface (C)</a>. </p><div class="dotgraph">
<img src="dot_inline_dotgraph_1.png" alt="dot_inline_dotgraph_1.png" border="0" usemap="#dot_inline_dotgraph_1.map"/>
<map name="dot_inline_dotgraph_1.map" id="dot_inline_dotgraph_1.map"><area shape="rect" href="a03785.html#cCreateContext" title="Create\nContext" alt="" coords="5,56,77,104"/>
<area shape="rect" href="a03785.html#cEnumerate" title="Enumerate\nGlasses" alt="" coords="131,56,217,104"/>
<area shape="rect" href="a03785.html#cSystemWideQuery" title="System&#45;wide\nQueries" alt="" coords="125,165,223,213"/>
<area shape="rect" href="a03785.html#cCreateSelect" title="Create\nGlasses" alt="" coords="271,56,343,104"/>
<area shape="rect" href="a03785.html#cNonExclusiveOps" title="Non&#45;exclusive\noperations" alt="" coords="522,80,625,128"/>
<area shape="rect" href="a03785.html#cReserve" title="Reserve for\nExclusive" alt="" coords="681,53,768,101"/>
<area shape="rect" href="a03785.html#cEnsureReady" title="Ensure Ready\nfor Exclusive" alt="" coords="673,125,777,173"/>
<area shape="rect" href="a03785.html#cRelease" title="Release\nExclusive" alt="" coords="825,48,902,96"/>
<area shape="rect" href="a03785.html#cExclusiveOps" title="Exclusive &amp;\nNon&#45;exclusive\noperations" alt="" coords="673,198,776,253"/>
<area shape="rect" href="a03785.html#cReleaseContext" title="Release\nContext" alt="" coords="950,48,1022,96"/>
</map>
</div>
<h2><a class="anchor" id="cCreateContext"></a>
Create Context</h2>
<div class="fragment"><div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>    <a class="code hl_struct" href="a03680.html">T5_ClientInfo</a> clientInfo = {</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>        .<a class="code hl_variable" href="a03680.html#a8c365c0a41a665696d66ee732a239e0f">applicationId</a>      = <span class="stringliteral">&quot;com.MyCompany.MyApplication&quot;</span>,</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>        .applicationVersion = <span class="stringliteral">&quot;1.0.0&quot;</span>,</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>        .sdkType            = 0,</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>        .reserved           = 0,</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    };</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span> </div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    <a class="code hl_typedef" href="a00042.html#ga65a594a65a15851444a8c4d5ee389818">T5_Context</a> t5ctx;</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>    <a class="code hl_typedef" href="a00008.html#af0dc9f652c1cdff320e511887034cd79">T5_Result</a> err = <a class="code hl_function" href="a00032.html#ga2ec424deb765c6cec9aa182c9ee71f74">t5CreateContext</a>(&amp;t5ctx, &amp;clientInfo, 0);</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>    <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>        printf(<span class="stringliteral">&quot;Failed to create context\n&quot;</span>);</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    }</div>
<div class="ttc" id="aa00008_html_af0dc9f652c1cdff320e511887034cd79"><div class="ttname"><a href="a00008.html#af0dc9f652c1cdff320e511887034cd79">T5_Result</a></div><div class="ttdeci">uint32_t T5_Result</div><div class="ttdoc">Represents an error code that may be returned by the Tilt Five™ API.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00047">errors.h:47</a></div></div>
<div class="ttc" id="aa00032_html_ga2ec424deb765c6cec9aa182c9ee71f74"><div class="ttname"><a href="a00032.html#ga2ec424deb765c6cec9aa182c9ee71f74">t5CreateContext</a></div><div class="ttdeci">T5_EXPORT T5_Result t5CreateContext(T5_Context *context, const T5_ClientInfo *clientInfo, void *platformContext)</div><div class="ttdoc">Create a context object.</div></div>
<div class="ttc" id="aa00042_html_ga65a594a65a15851444a8c4d5ee389818"><div class="ttname"><a href="a00042.html#ga65a594a65a15851444a8c4d5ee389818">T5_Context</a></div><div class="ttdeci">struct T5_ContextImpl * T5_Context</div><div class="ttdoc">Opaque handle used with system-wide functions.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00071">types.h:71</a></div></div>
<div class="ttc" id="aa03680_html"><div class="ttname"><a href="a03680.html">T5_ClientInfo</a></div><div class="ttdoc">Client provided information for use with t5CreateGlasses()</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00136">types.h:136</a></div></div>
<div class="ttc" id="aa03680_html_a8c365c0a41a665696d66ee732a239e0f"><div class="ttname"><a href="a03680.html#a8c365c0a41a665696d66ee732a239e0f">T5_ClientInfo::applicationId</a></div><div class="ttdeci">const char * applicationId</div><div class="ttdoc">The application ID.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00138">types.h:138</a></div></div>
</div><!-- fragment --> <h3><a class="anchor" id="cReleaseContext"></a>
Release Context</h3>
<p >The context should be released after it's finished with </p><div class="fragment"><div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>    <a class="code hl_function" href="a00032.html#ga5ac50dd44b5b77a72024e7606fc4bd18">t5DestroyContext</a>(&amp;t5ctx);</div>
<div class="ttc" id="aa00032_html_ga5ac50dd44b5b77a72024e7606fc4bd18"><div class="ttname"><a href="a00032.html#ga5ac50dd44b5b77a72024e7606fc4bd18">t5DestroyContext</a></div><div class="ttdeci">T5_EXPORT void t5DestroyContext(T5_Context *context)</div><div class="ttdoc">Destroy a context object.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="cSystemWideQuery"></a>
System-wide Queries</h2>
<p >System-wide queries require nothing more than a client to perform. Most of these operations are querying the service for common parameters such as the service version (<a class="el" href="a00034.html#ga23bfad64e86cbd00442d9eb44362ccfa" title="Get a system-wide UTF-8 encoded string parameter.">t5GetSystemUtf8Param()</a> and fixed physical parameters (<a class="el" href="a00033.html#ga61ab41c966d9310c05000cb8f0cc2437" title="Get the gameboard dimensions.">t5GetGameboardSize()</a>). </p><div class="fragment"><div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>        <a class="code hl_struct" href="a03676.html">T5_GameboardSize</a> gameboardSize;</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>        err = <a class="code hl_function" href="a00033.html#ga61ab41c966d9310c05000cb8f0cc2437">t5GetGameboardSize</a>(t5ctx, <a class="code hl_enumvalue" href="a00042.html#gga8eb53e95249a4e9c9198ea0b61c0f0f0a2ff343485cedf2de95a5d6868f9b42d3">kT5_GameboardType_LE</a>, &amp;gameboardSize);</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>        <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>            printf(<span class="stringliteral">&quot;Failed to get gameboard size\n&quot;</span>);</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>            printf(<span class="stringliteral">&quot;LE Gameboard size : %fm x %fm x %fm\n&quot;</span>,</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>                   gameboardSize.<a class="code hl_variable" href="a03676.html#ab4ea9b9ce5e47cff8bd425f1fd2313a8">viewableExtentPositiveX</a> + gameboardSize.<a class="code hl_variable" href="a03676.html#aa66858b8105c362f1090ff9d47538e81">viewableExtentNegativeX</a>,</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>                   gameboardSize.<a class="code hl_variable" href="a03676.html#a914bddec1647947331f886dc3634ee2e">viewableExtentPositiveY</a> + gameboardSize.<a class="code hl_variable" href="a03676.html#a238b2cb12b08b5bcb6ba903b03c07bc0">viewableExtentNegativeY</a>,</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>                   gameboardSize.<a class="code hl_variable" href="a03676.html#a25ea806e0b31b176a61094c90f42ccf8">viewableExtentPositiveZ</a>);</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>        }</div>
<div class="ttc" id="aa00033_html_ga61ab41c966d9310c05000cb8f0cc2437"><div class="ttname"><a href="a00033.html#ga61ab41c966d9310c05000cb8f0cc2437">t5GetGameboardSize</a></div><div class="ttdeci">T5_EXPORT T5_Result t5GetGameboardSize(T5_Context context, T5_GameboardType gameboardType, T5_GameboardSize *gameboardSize)</div><div class="ttdoc">Get the gameboard dimensions.</div></div>
<div class="ttc" id="aa00042_html_gga8eb53e95249a4e9c9198ea0b61c0f0f0a2ff343485cedf2de95a5d6868f9b42d3"><div class="ttname"><a href="a00042.html#gga8eb53e95249a4e9c9198ea0b61c0f0f0a2ff343485cedf2de95a5d6868f9b42d3">kT5_GameboardType_LE</a></div><div class="ttdeci">@ kT5_GameboardType_LE</div><div class="ttdoc">An LE gameboard.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00103">types.h:103</a></div></div>
<div class="ttc" id="aa03676_html"><div class="ttname"><a href="a03676.html">T5_GameboardSize</a></div><div class="ttdoc">Physical dimensions of a gameboard.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00113">types.h:113</a></div></div>
<div class="ttc" id="aa03676_html_a238b2cb12b08b5bcb6ba903b03c07bc0"><div class="ttname"><a href="a03676.html#a238b2cb12b08b5bcb6ba903b03c07bc0">T5_GameboardSize::viewableExtentNegativeY</a></div><div class="ttdeci">float viewableExtentNegativeY</div><div class="ttdoc">The distance in meters from the gameboard origin to the edge of the viewable area in the negative Y d...</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00128">types.h:128</a></div></div>
<div class="ttc" id="aa03676_html_a25ea806e0b31b176a61094c90f42ccf8"><div class="ttname"><a href="a03676.html#a25ea806e0b31b176a61094c90f42ccf8">T5_GameboardSize::viewableExtentPositiveZ</a></div><div class="ttdeci">float viewableExtentPositiveZ</div><div class="ttdoc">The distance in meters above the gameboard origin that the viewable area extends in the positive Z di...</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00132">types.h:132</a></div></div>
<div class="ttc" id="aa03676_html_a914bddec1647947331f886dc3634ee2e"><div class="ttname"><a href="a03676.html#a914bddec1647947331f886dc3634ee2e">T5_GameboardSize::viewableExtentPositiveY</a></div><div class="ttdeci">float viewableExtentPositiveY</div><div class="ttdoc">The distance in meters from the gameboard origin to the edge of the viewable area in the positive Y d...</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00124">types.h:124</a></div></div>
<div class="ttc" id="aa03676_html_aa66858b8105c362f1090ff9d47538e81"><div class="ttname"><a href="a03676.html#aa66858b8105c362f1090ff9d47538e81">T5_GameboardSize::viewableExtentNegativeX</a></div><div class="ttdeci">float viewableExtentNegativeX</div><div class="ttdoc">The distance in meters from the gameboard origin to the edge of the viewable area in the negative X d...</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00120">types.h:120</a></div></div>
<div class="ttc" id="aa03676_html_ab4ea9b9ce5e47cff8bd425f1fd2313a8"><div class="ttname"><a href="a03676.html#ab4ea9b9ce5e47cff8bd425f1fd2313a8">T5_GameboardSize::viewableExtentPositiveX</a></div><div class="ttdeci">float viewableExtentPositiveX</div><div class="ttdoc">The distance in meters from the gameboard origin to the edge of the viewable area in the positive X d...</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00116">types.h:116</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="cEnumerate"></a>
Enumerate Glasses</h2>
<div class="fragment"><div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>        <span class="keywordtype">size_t</span> bufferSize = GLASSES_BUFFER_SIZE;</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>        <span class="keywordtype">char</span> glassesListBuffer[GLASSES_BUFFER_SIZE];</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>        err = <a class="code hl_function" href="a00033.html#gaeb38a960d3f99c9dace89ffae3a237e2">t5ListGlasses</a>(t5ctx, glassesListBuffer, &amp;bufferSize);</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>        <span class="keywordflow">if</span> (!err) {</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>            <span class="keywordtype">size_t</span> glassesCount = 0;</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span> </div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>            <span class="keyword">const</span> <span class="keywordtype">char</span>* buffPtr = glassesListBuffer;</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>            <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>                <span class="comment">// Get the length of the string and exit if we&#39;ve read the</span></div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>                <span class="comment">// terminal string (Zero length)</span></div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>                <span class="keywordtype">size_t</span> stringLength = strnlen(buffPtr, GLASSES_BUFFER_SIZE);</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>                <span class="keywordflow">if</span> (stringLength == 0) {</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>                }</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span> </div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>                fprintf(stderr, <span class="stringliteral">&quot;Glasses : %s\n&quot;</span>, buffPtr);</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>                glassesCount++;</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span> </div>
<div class="ttc" id="aa00033_html_gaeb38a960d3f99c9dace89ffae3a237e2"><div class="ttname"><a href="a00033.html#gaeb38a960d3f99c9dace89ffae3a237e2">t5ListGlasses</a></div><div class="ttdeci">T5_EXPORT T5_Result t5ListGlasses(T5_Context context, char *buffer, size_t *bufferSize)</div><div class="ttdoc">Enumerate all glasses.</div></div>
</div><!-- fragment --><p> At this point <code>buffPtr</code> contains a glasses identifier suitable for <a class="el" href="a03785.html#cCreateSelect">Create Glasses</a> 'creating/selecting glasses'. </p><div class="fragment"><div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span> </div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>                <span class="comment">// Advance through the returned values</span></div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>                buffPtr += stringLength;</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>                <span class="keywordflow">if</span> (buffPtr &gt; (glassesListBuffer + GLASSES_BUFFER_SIZE)) {</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>                    printf(<span class="stringliteral">&quot;Warning: list may be missing null terminator&quot;</span>);</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>                }</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>            }</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span> </div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>            printf(<span class="stringliteral">&quot;Listed glasses [%zu found]\n&quot;</span>, glassesCount);</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>        }</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span> </div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>        <span class="keywordflow">if</span> (err == <a class="code hl_define" href="a00029.html#ga6d6444b975764859a1deab3a44f8da27">T5_ERROR_NO_SERVICE</a>) {</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>            <span class="keywordflow">if</span> (!waiting) {</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>                printf(<span class="stringliteral">&quot;Waiting for service...\n&quot;</span>);</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>                waiting = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>            }</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>            printf(<span class="stringliteral">&quot;Error listing glasses : %s\n&quot;</span>, <a class="code hl_function" href="a00029.html#ga636fd5ec34e9f752d1f7ba5fbd89b636">t5GetResultMessage</a>(err));</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>            exit(EXIT_FAILURE);</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>        }</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>    }</div>
</div><!-- fragment --><h2><a class="anchor" id="cCreateSelect"></a>
Create Glasses</h2>
<p >Creating glasses handles requires a hardware identifier (<code>id</code> below) for the glasses as well as some information about the client. </p><div class="fragment"><div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span> </div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>    <span class="comment">// CREATE GLASSES</span></div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    <a class="code hl_typedef" href="a00042.html#gac4f432bf3aa06969958dc302864f5215">T5_Glasses</a> glassesHandle;</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>    <a class="code hl_typedef" href="a00008.html#af0dc9f652c1cdff320e511887034cd79">T5_Result</a> err = <a class="code hl_function" href="a00033.html#ga514cb18fc14ad0e8acf1c86be462bcc5">t5CreateGlasses</a>(t5ctx, <span class="keywordtype">id</span>, &amp;glassesHandle);</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>    <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>        printf(<span class="stringliteral">&quot;Error creating glasses &#39;%s&#39; : %s\n&quot;</span>, <span class="keywordtype">id</span>, <a class="code hl_function" href="a00029.html#ga636fd5ec34e9f752d1f7ba5fbd89b636">t5GetResultMessage</a>(err));</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>        printf(<span class="stringliteral">&quot;Created glasses   : &#39;%s&#39;\n&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    }</div>
<div class="ttc" id="aa00033_html_ga514cb18fc14ad0e8acf1c86be462bcc5"><div class="ttname"><a href="a00033.html#ga514cb18fc14ad0e8acf1c86be462bcc5">t5CreateGlasses</a></div><div class="ttdeci">T5_EXPORT T5_Result t5CreateGlasses(T5_Context context, const char *id, T5_Glasses *glasses)</div><div class="ttdoc">Create a glasses access object.</div></div>
<div class="ttc" id="aa00042_html_gac4f432bf3aa06969958dc302864f5215"><div class="ttname"><a href="a00042.html#gac4f432bf3aa06969958dc302864f5215">T5_Glasses</a></div><div class="ttdeci">struct T5_GlassesImpl * T5_Glasses</div><div class="ttdoc">Opaque handle used with glasses.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00077">types.h:77</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="cNonExclusiveOps"></a>
Non-exclusive Operations</h2>
<p >Some glasses operations are available without acquiring exclusive access. These include operations to query stored parameters about glasses such as the IPD (<a class="el" href="a00038.html#ga166243efe5dbc13fdf8a4a66e16ebe03" title="Get a glasses floating point parameter.">t5GetGlassesFloatParam()</a>) and user specified friendly name (<a class="el" href="a00038.html#ga4f6d83a4048e9ff3389f037acfb2b5fe" title="Get a glasses UTF-8 encoded string parameter.">t5GetGlassesUtf8Param()</a>). Additionally, accessing the <a class="el" href="a03785.html#cAboutWandStream">Wand Stream</a> 'wand stream' does not require an exclusive connection. </p><div class="fragment"><div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span><a class="code hl_typedef" href="a00008.html#af0dc9f652c1cdff320e511887034cd79">T5_Result</a> endlesslyWatchSettings(<a class="code hl_typedef" href="a00042.html#gac4f432bf3aa06969958dc302864f5215">T5_Glasses</a> glassesHandle, <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keywordtype">id</span>) {</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>    <a class="code hl_typedef" href="a00008.html#af0dc9f652c1cdff320e511887034cd79">T5_Result</a> err;</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span> </div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    printf(<span class="stringliteral">&quot;Watching for changes to settings... (forever)\n&quot;</span>);</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>        uint16_t <a class="code hl_functionRef" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01571.html#gaac8d83292f8c124ec62a2b9d5e6046d6">count</a> = PARAM_BUFFER_SIZE;</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>        <a class="code hl_enumeration" href="a00042.html#ga5febd253ae9871a4b46ec353e68a72b1">T5_ParamGlasses</a> paramBuffer[PARAM_BUFFER_SIZE];</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        err = <a class="code hl_function" href="a00038.html#ga5a949eeb7a235f020d8b84c3f7a97772">t5GetChangedGlassesParams</a>(glassesHandle, paramBuffer, &amp;<a class="code hl_functionRef" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01571.html#gaac8d83292f8c124ec62a2b9d5e6046d6">count</a>);</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>        <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>            printf(<span class="stringliteral">&quot;Error getting changed params for &#39;%s&#39; : %s\n&quot;</span>, <span class="keywordtype">id</span>, <a class="code hl_function" href="a00029.html#ga636fd5ec34e9f752d1f7ba5fbd89b636">t5GetResultMessage</a>(err));</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>            <span class="keywordflow">return</span> err;</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>        }</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span> </div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>        <span class="comment">// Get the values of the changed params</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_functionRef" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01571.html#gaac8d83292f8c124ec62a2b9d5e6046d6">count</a>; i++) {</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>            <span class="keywordflow">switch</span> (paramBuffer[i]) {</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="a00042.html#gga5febd253ae9871a4b46ec353e68a72b1a220326561276f9f3c90c9a1035abc7b4">kT5_ParamGlasses_Float_IPD</a>: {</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>                    <span class="keywordtype">double</span> value = 0.0;</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>                    err          = <a class="code hl_function" href="a00038.html#ga166243efe5dbc13fdf8a4a66e16ebe03">t5GetGlassesFloatParam</a>(glassesHandle, 0, paramBuffer[i], &amp;value);</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>                    <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>                        printf(<span class="stringliteral">&quot;Error getting changed IPD for &#39;%s&#39; : %s\n&quot;</span>,</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>                               <span class="keywordtype">id</span>,</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>                               <a class="code hl_function" href="a00029.html#ga636fd5ec34e9f752d1f7ba5fbd89b636">t5GetResultMessage</a>(err));</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>                        <span class="keywordflow">return</span> err;</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>                    }</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span> </div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>                    printf(<span class="stringliteral">&quot;IPD changed for &#39;%s&#39; : %f\n&quot;</span>, <span class="keywordtype">id</span>, value);</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>                } <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span> </div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="a00042.html#gga5febd253ae9871a4b46ec353e68a72b1a407885fd7cd9d56a5c3b931c9ab8b9ed">kT5_ParamGlasses_UTF8_FriendlyName</a>: {</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>                    <span class="keywordtype">char</span> buffer[<a class="code hl_define" href="a00042.html#ga1b3b29732a2474ff4402ff61d29a3f21">T5_MAX_STRING_PARAM_LEN</a>];</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>                    <span class="keywordtype">size_t</span> bufferSize = <a class="code hl_define" href="a00042.html#ga1b3b29732a2474ff4402ff61d29a3f21">T5_MAX_STRING_PARAM_LEN</a>;</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>                    err               = <a class="code hl_function" href="a00038.html#ga4f6d83a4048e9ff3389f037acfb2b5fe">t5GetGlassesUtf8Param</a>(</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>                        glassesHandle, paramBuffer[i], 0, buffer, &amp;bufferSize);</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>                    <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>                        printf(<span class="stringliteral">&quot;Error getting changed friendly name for &#39;%s&#39; : %s\n&quot;</span>,</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>                               <span class="keywordtype">id</span>,</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>                               <a class="code hl_function" href="a00029.html#ga636fd5ec34e9f752d1f7ba5fbd89b636">t5GetResultMessage</a>(err));</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>                        <span class="keywordflow">return</span> err;</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>                    }</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span> </div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>                    printf(<span class="stringliteral">&quot;Friendly name changed for &#39;%s&#39; : &#39;%s&#39;\n&quot;</span>, <span class="keywordtype">id</span>, buffer);</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>                } <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span> </div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>                <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>                    <span class="comment">// Ignore other parameters</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>            }</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        }</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    }</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>}</div>
<div class="ttc" id="aa00038_html_ga166243efe5dbc13fdf8a4a66e16ebe03"><div class="ttname"><a href="a00038.html#ga166243efe5dbc13fdf8a4a66e16ebe03">t5GetGlassesFloatParam</a></div><div class="ttdeci">T5_EXPORT T5_Result t5GetGlassesFloatParam(T5_Glasses glasses, T5_WandHandle wand, T5_ParamGlasses param, double *value)</div><div class="ttdoc">Get a glasses floating point parameter.</div></div>
<div class="ttc" id="aa00038_html_ga4f6d83a4048e9ff3389f037acfb2b5fe"><div class="ttname"><a href="a00038.html#ga4f6d83a4048e9ff3389f037acfb2b5fe">t5GetGlassesUtf8Param</a></div><div class="ttdeci">T5_EXPORT T5_Result t5GetGlassesUtf8Param(T5_Glasses glasses, T5_WandHandle wand, T5_ParamGlasses param, char *buffer, size_t *bufferSize)</div><div class="ttdoc">Get a glasses UTF-8 encoded string parameter.</div></div>
<div class="ttc" id="aa00038_html_ga5a949eeb7a235f020d8b84c3f7a97772"><div class="ttname"><a href="a00038.html#ga5a949eeb7a235f020d8b84c3f7a97772">t5GetChangedGlassesParams</a></div><div class="ttdeci">T5_EXPORT T5_Result t5GetChangedGlassesParams(T5_Glasses glasses, T5_ParamGlasses *buffer, uint16_t *count)</div><div class="ttdoc">Get a glasses-specific list of changed parameters.</div></div>
<div class="ttc" id="aa00042_html_ga5febd253ae9871a4b46ec353e68a72b1"><div class="ttname"><a href="a00042.html#ga5febd253ae9871a4b46ec353e68a72b1">T5_ParamGlasses</a></div><div class="ttdeci">T5_ParamGlasses</div><div class="ttdoc">Possible parameters that can be retrieved for glasses.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00419">types.h:419</a></div></div>
<div class="ttc" id="aa00042_html_gga5febd253ae9871a4b46ec353e68a72b1a220326561276f9f3c90c9a1035abc7b4"><div class="ttname"><a href="a00042.html#gga5febd253ae9871a4b46ec353e68a72b1a220326561276f9f3c90c9a1035abc7b4">kT5_ParamGlasses_Float_IPD</a></div><div class="ttdeci">@ kT5_ParamGlasses_Float_IPD</div><div class="ttdoc">Interpupillary distance - Float, millimeters</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00422">types.h:422</a></div></div>
<div class="ttc" id="aa00042_html_gga5febd253ae9871a4b46ec353e68a72b1a407885fd7cd9d56a5c3b931c9ab8b9ed"><div class="ttname"><a href="a00042.html#gga5febd253ae9871a4b46ec353e68a72b1a407885fd7cd9d56a5c3b931c9ab8b9ed">kT5_ParamGlasses_UTF8_FriendlyName</a></div><div class="ttdeci">@ kT5_ParamGlasses_UTF8_FriendlyName</div><div class="ttdoc">User-facing name of the glasses - UTF8.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00425">types.h:425</a></div></div>
<div class="ttc" id="aa01571_html_gaac8d83292f8c124ec62a2b9d5e6046d6"><div class="ttname"><a href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01571.html#gaac8d83292f8c124ec62a2b9d5e6046d6">count</a></div><div class="ttdeci">constexpr iterator_traits&lt; _InputIterator &gt;::difference_type count(_InputIterator __first, _InputIterator __last, const _Tp &amp;__value)</div></div>
</div><!-- fragment --><h2><a class="anchor" id="cReserve"></a>
Reserve for Exclusive</h2>
<p >Other operations require exclusive access before a client can perform them. Only one client can have exclusive access to glasses at a time. Principally, obtaining the current pose (<a class="el" href="a00037.html#ga75c8621a6b3d87bf978d572ea3d3ac26" title="Get the latest pose of the glasses.">t5GetGlassesPose()</a>) and sending frames for rendering (<a class="el" href="a00037.html#ga6aaa32c766446663d172c20bc8e809eb" title="Send a frame to display on the glasses.">t5SendFrameToGlasses()</a>) require exclusive access.</p>
<p >Essentially, this is a process of repeatedly calling <a class="el" href="a00036.html#ga7bd6008e23fd1bfe439c22ac7a07206e" title="Reserve glasses for exclusive operations by the client.">t5ReserveGlasses()</a> until the function returns success. This can succeed even if glasses are not fully available (for example due to rebooting). Once the glasses are marked exclusive, then it is time to <a class="el" href="a03785.html#cEnsureReady">ensure the glasses are ready for exclusive operations</a>.</p>
<div class="fragment"><div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    err = <a class="code hl_function" href="a00036.html#ga7bd6008e23fd1bfe439c22ac7a07206e">t5ReserveGlasses</a>(glassesHandle, <span class="stringliteral">&quot;My Awesome Application&quot;</span>);</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>    <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>        printf(<span class="stringliteral">&quot;Error acquiring glasses &#39;%s&#39;: %s\n&quot;</span>, <span class="keywordtype">id</span>, <a class="code hl_function" href="a00029.html#ga636fd5ec34e9f752d1f7ba5fbd89b636">t5GetResultMessage</a>(err));</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>    }</div>
<div class="ttc" id="aa00036_html_ga7bd6008e23fd1bfe439c22ac7a07206e"><div class="ttname"><a href="a00036.html#ga7bd6008e23fd1bfe439c22ac7a07206e">t5ReserveGlasses</a></div><div class="ttdeci">T5_EXPORT T5_Result t5ReserveGlasses(T5_Glasses glasses, const char *displayName)</div><div class="ttdoc">Reserve glasses for exclusive operations by the client.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="cEnsureReady"></a>
Ensure Ready for Exclusive</h2>
<p >After a pair of glasses has been <a class="el" href="a03785.html#cReserve">reserved</a>, they need to be made fully ready for exclusive operations (e.g., getting the current glasses pose and sending frames) using <code><a class="el" href="a00036.html#gae85f2307e74e49e6e9c5f0edadfb3ee8" title="Ensure that reserved glasses are ready for exclusive operations.">t5EnsureGlassesReady()</a></code>. This may return an error that retry is needed if the glasses are not yet ready. Upon success, the glasses are ready for <a class="el" href="a03785.html#cExclusiveOps">exclusive operations</a>.</p>
<div class="fragment"><div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>    <span class="comment">// ENSURE GLASSES ARE READY</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>        err = <a class="code hl_function" href="a00036.html#gae85f2307e74e49e6e9c5f0edadfb3ee8">t5EnsureGlassesReady</a>(glassesHandle);</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>        <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>            <span class="keywordflow">if</span> (err == <a class="code hl_define" href="a00029.html#ga2659362854e36ba993abeb6b82d07400">T5_ERROR_TRY_AGAIN</a>) {</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>                <span class="comment">// A non-sample program would probably sleep here or retry on another frame pass.</span></div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>            }</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>            printf(<span class="stringliteral">&quot;Error ensure glasses ready &#39;%s&#39;: %s\n&quot;</span>, <span class="keywordtype">id</span>, <a class="code hl_function" href="a00029.html#ga636fd5ec34e9f752d1f7ba5fbd89b636">t5GetResultMessage</a>(err));</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>        }</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span> </div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>        printf(<span class="stringliteral">&quot;Glasses ready     : &#39;%s&#39;\n&quot;</span>, <span class="keywordtype">id</span>);</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    }</div>
<div class="ttc" id="aa00029_html_ga2659362854e36ba993abeb6b82d07400"><div class="ttname"><a href="a00029.html#ga2659362854e36ba993abeb6b82d07400">T5_ERROR_TRY_AGAIN</a></div><div class="ttdeci">#define T5_ERROR_TRY_AGAIN</div><div class="ttdoc">Target is not currently available.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00120">errors.h:120</a></div></div>
<div class="ttc" id="aa00036_html_gae85f2307e74e49e6e9c5f0edadfb3ee8"><div class="ttname"><a href="a00036.html#gae85f2307e74e49e6e9c5f0edadfb3ee8">t5EnsureGlassesReady</a></div><div class="ttdeci">T5_EXPORT T5_Result t5EnsureGlassesReady(T5_Glasses glasses)</div><div class="ttdoc">Ensure that reserved glasses are ready for exclusive operations.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="cExclusiveOps"></a>
Exclusive Operations</h2>
<p >Once an exclusive connection has been established, you may perform exclusive operations such as <a class="el" href="a00037.html#ga75c8621a6b3d87bf978d572ea3d3ac26" title="Get the latest pose of the glasses.">t5GetGlassesPose()</a> and <a class="el" href="a00037.html#ga6aaa32c766446663d172c20bc8e809eb" title="Send a frame to display on the glasses.">t5SendFrameToGlasses()</a>. </p><div class="fragment"><div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span><span class="keywordtype">void</span> getPoses(<a class="code hl_typedef" href="a00042.html#gac4f432bf3aa06969958dc302864f5215">T5_Glasses</a> glassesHandle) {</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    <a class="code hl_typedef" href="a00008.html#af0dc9f652c1cdff320e511887034cd79">T5_Result</a> err;</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <a class="code hl_struct" href="a03684.html">T5_GlassesPose</a> pose;</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span> </div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    printf(<span class="stringliteral">&quot;Getting some poses&quot;</span>);</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span> </div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    <span class="keywordtype">bool</span> waiting = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 1000; i++) {</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>        err = <a class="code hl_function" href="a00037.html#ga75c8621a6b3d87bf978d572ea3d3ac26">t5GetGlassesPose</a>(glassesHandle, <a class="code hl_enumvalue" href="a00042.html#ggadec14b70792f6440b43512cbc9b0c42aa82298e2e92a43ec9a14271d65bd223f4">kT5_GlassesPoseUsage_GlassesPresentation</a>, &amp;pose);</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>        <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>            <span class="keywordflow">if</span> (err == <a class="code hl_define" href="a00029.html#ga2659362854e36ba993abeb6b82d07400">T5_ERROR_TRY_AGAIN</a>) {</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>                <span class="keywordflow">if</span> (!waiting) {</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>                    printf(<span class="stringliteral">&quot;\nWaiting...&quot;</span>);</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>                    fflush(stdout);</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>                    printf(<span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>                    fflush(stdout);</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>                }</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>                SLEEP(100);</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>                i--;</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>                waiting = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>                printf(<span class="stringliteral">&quot;Failed to get pose : %s\n&quot;</span>, <a class="code hl_function" href="a00029.html#ga636fd5ec34e9f752d1f7ba5fbd89b636">t5GetResultMessage</a>(err));</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>            }</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>        }</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>        waiting = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span> </div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>        printf(<span class="stringliteral">&quot;\nGLASSES POSE : [%lu] (Board:%s) &quot;</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>               <span class="stringliteral">&quot;[%6.4f, %6.4f, %6.4f] [%6.4f, %6.4f, %6.4f, %6.4f]&quot;</span>,</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>               pose.<a class="code hl_variable" href="a03684.html#a05ca8ac377d1cda2f19d0e1cd8428dc5">timestampNanos</a>,</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>               gameboardTypeString(pose.<a class="code hl_variable" href="a03684.html#ada96e07d1a8b127e82cf5e0e81b76c31">gameboardType</a>),</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>               pose.<a class="code hl_variable" href="a03684.html#a14824e5d998242919338c80b7fa688d0">posGLS_GBD</a>.x,</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>               pose.<a class="code hl_variable" href="a03684.html#a14824e5d998242919338c80b7fa688d0">posGLS_GBD</a>.y,</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>               pose.<a class="code hl_variable" href="a03684.html#a14824e5d998242919338c80b7fa688d0">posGLS_GBD</a>.z,</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>               pose.<a class="code hl_variable" href="a03684.html#ac3b1d7918f113d68906fc72aaaf6a1ca">rotToGLS_GBD</a>.w,</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>               pose.<a class="code hl_variable" href="a03684.html#ac3b1d7918f113d68906fc72aaaf6a1ca">rotToGLS_GBD</a>.x,</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>               pose.<a class="code hl_variable" href="a03684.html#ac3b1d7918f113d68906fc72aaaf6a1ca">rotToGLS_GBD</a>.y,</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>               pose.<a class="code hl_variable" href="a03684.html#ac3b1d7918f113d68906fc72aaaf6a1ca">rotToGLS_GBD</a>.z);</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span> </div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>        SLEEP(16);</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    }</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span> </div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>}</div>
<div class="ttc" id="aa00037_html_ga75c8621a6b3d87bf978d572ea3d3ac26"><div class="ttname"><a href="a00037.html#ga75c8621a6b3d87bf978d572ea3d3ac26">t5GetGlassesPose</a></div><div class="ttdeci">T5_EXPORT T5_Result t5GetGlassesPose(T5_Glasses glasses, T5_GlassesPoseUsage usage, T5_GlassesPose *pose)</div><div class="ttdoc">Get the latest pose of the glasses.</div></div>
<div class="ttc" id="aa00042_html_ggadec14b70792f6440b43512cbc9b0c42aa82298e2e92a43ec9a14271d65bd223f4"><div class="ttname"><a href="a00042.html#ggadec14b70792f6440b43512cbc9b0c42aa82298e2e92a43ec9a14271d65bd223f4">kT5_GlassesPoseUsage_GlassesPresentation</a></div><div class="ttdeci">@ kT5_GlassesPoseUsage_GlassesPresentation</div><div class="ttdoc">The pose will be used to render images to be presented on the glasses.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00176">types.h:176</a></div></div>
<div class="ttc" id="aa03684_html"><div class="ttname"><a href="a03684.html">T5_GlassesPose</a></div><div class="ttdoc">Glasses pose information to be retrieved with t5GetGlassesPose()</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00199">types.h:199</a></div></div>
<div class="ttc" id="aa03684_html_a05ca8ac377d1cda2f19d0e1cd8428dc5"><div class="ttname"><a href="a03684.html#a05ca8ac377d1cda2f19d0e1cd8428dc5">T5_GlassesPose::timestampNanos</a></div><div class="ttdeci">uint64_t timestampNanos</div><div class="ttdoc">The timestamp of the pose.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00201">types.h:201</a></div></div>
<div class="ttc" id="aa03684_html_a14824e5d998242919338c80b7fa688d0"><div class="ttname"><a href="a03684.html#a14824e5d998242919338c80b7fa688d0">T5_GlassesPose::posGLS_GBD</a></div><div class="ttdeci">T5_Vec3 posGLS_GBD</div><div class="ttdoc">The position of the origin of the GLS (glasses) frame relative to the GBD (gameboard) frame.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00205">types.h:205</a></div></div>
<div class="ttc" id="aa03684_html_ac3b1d7918f113d68906fc72aaaf6a1ca"><div class="ttname"><a href="a03684.html#ac3b1d7918f113d68906fc72aaaf6a1ca">T5_GlassesPose::rotToGLS_GBD</a></div><div class="ttdeci">T5_Quat rotToGLS_GBD</div><div class="ttdoc">The rotation that transforms points in the GBD (gameboard) frame orientation to the GLS (glasses) fra...</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00209">types.h:209</a></div></div>
<div class="ttc" id="aa03684_html_ada96e07d1a8b127e82cf5e0e81b76c31"><div class="ttname"><a href="a03684.html#ada96e07d1a8b127e82cf5e0e81b76c31">T5_GlassesPose::gameboardType</a></div><div class="ttdeci">T5_GameboardType gameboardType</div><div class="ttdoc">The type of gameboard visible for this pose.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00212">types.h:212</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="cRelease"></a>
Release Exclusive Access</h2>
<p >At any point after glasses have been reserved by a client, they can be released so that another client can reserve them instead <em>without</em> needing to destroy the whole glasses object or context. Use <a class="el" href="a00035.html#ga6b8e3de220da68dbb9aabc0d6e37583c">t5ReleaseGlasses()</a> to restore availability to other clients.</p>
<div class="fragment"><div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    <span class="comment">// RELEASE THE GLASSES</span></div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>    <a class="code hl_function" href="a00035.html#ga6b8e3de220da68dbb9aabc0d6e37583c">t5ReleaseGlasses</a>(glassesHandle);</div>
<div class="ttc" id="aa00035_html_ga6b8e3de220da68dbb9aabc0d6e37583c"><div class="ttname"><a href="a00035.html#ga6b8e3de220da68dbb9aabc0d6e37583c">t5ReleaseGlasses</a></div><div class="ttdeci">T5_EXPORT T5_Result t5ReleaseGlasses(T5_Glasses glasses)</div></div>
</div><!-- fragment --><h1><a class="anchor" id="cAboutWandStream"></a>
Wand Stream</h1>
<p >Information about wand events is not delivered separately for each connected wand, but is instead multiplexed into a glasses global stream. Stream events are one of the following (<a class="el" href="a00042.html#gab24ef720ba130bc53642b696ee375919" title="Wand stream event type.">T5_WandStreamEventType</a>):</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Event   </th><th class="markdownTableHeadNone">Meaning    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="a00042.html#ggab24ef720ba130bc53642b696ee375919a167d45ce1b088d96144f1e6c1874a385">Connect</a>   </td><td class="markdownTableBodyNone">Glasses have detected a wand has connected.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="a00042.html#ggab24ef720ba130bc53642b696ee375919a601cf31d6b7c28cb9f7956d46add3282">Disconnect</a>   </td><td class="markdownTableBodyNone">Glasses have detected a wand disconnection.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="a00042.html#ggab24ef720ba130bc53642b696ee375919abff736b608e692d9ebdd2639fd4c27b3">Desync</a>   </td><td class="markdownTableBodyNone">The wand stream has desynchronized, and the client may have missed one or more connection, disconnection or report packets.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="a00042.html#ggab24ef720ba130bc53642b696ee375919a722acef440298a67d4f3402099bfbaa6">Report</a>   </td><td class="markdownTableBodyNone">A <a class="el" href="a03708.html" title="Contains wand related information (Pose, Buttons, Trigger, Stick, Battery)">T5_WandReport</a> is available detailing button, analog and positional data for a wand.   </td></tr>
</table>
<p >Simplistically, accessing the wand stream is done by configuring the stream (<a class="el" href="a00039.html#gae3e5c2929f01f31945dc9b92b1aacd44" title="Configure the wand event stream.">t5ConfigureWandStreamForGlasses()</a>) and then repeatedly polling the stream (<a class="el" href="a00039.html#ga923bd9ab4e0b3643968948577ae1d256" title="Read from the wands event stream.">t5ReadWandStreamForGlasses()</a>). </p><div class="fragment"><div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>    <span class="keywordflow">if</span> (<a class="code hl_functionRef" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01571.html#gaac8d83292f8c124ec62a2b9d5e6046d6">count</a> &gt; 0) {</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>        <span class="comment">// Enable wand stream</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>        <a class="code hl_struct" href="a03704.html">T5_WandStreamConfig</a> config;</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>        config.<a class="code hl_variable" href="a03704.html#a053dd9990c6120b9a6f4057ac5274bfd">enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>        err            = <a class="code hl_function" href="a00039.html#gae3e5c2929f01f31945dc9b92b1aacd44">t5ConfigureWandStreamForGlasses</a>(glassesHandle, &amp;config);</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>        <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>            printf(<span class="stringliteral">&quot;Failed to enable stream : %s\n&quot;</span>, <a class="code hl_function" href="a00029.html#ga636fd5ec34e9f752d1f7ba5fbd89b636">t5GetResultMessage</a>(err));</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>        }</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span> </div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>        <a class="code hl_struct" href="a03716.html">T5_WandStreamEvent</a> event;</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 100; i++) {</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>            err = <a class="code hl_function" href="a00039.html#ga923bd9ab4e0b3643968948577ae1d256">t5ReadWandStreamForGlasses</a>(glassesHandle, &amp;event, 100);</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>            <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>                <span class="keywordflow">if</span> (err == <a class="code hl_define" href="a00029.html#ga4d7b9c8513e0e08585e0b65b39f4f841">T5_TIMEOUT</a>) {</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>                }</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span> </div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>                printf(<span class="stringliteral">&quot;Failed to read stream : %s\n&quot;</span>, <a class="code hl_function" href="a00029.html#ga636fd5ec34e9f752d1f7ba5fbd89b636">t5GetResultMessage</a>(err));</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>            }</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span> </div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>            <span class="keywordflow">switch</span> (event.<a class="code hl_variable" href="a03716.html#a824c800c109abedb87324bc998da2cd9">type</a>) {</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="a00042.html#ggab24ef720ba130bc53642b696ee375919a167d45ce1b088d96144f1e6c1874a385">kT5_WandStreamEventType_Connect</a>:</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>                    printf(<span class="stringliteral">&quot;WAND EVENT : CONNECT [%u]\n&quot;</span>, event.<a class="code hl_variable" href="a03716.html#ae112eeae4695d19c93960ef89dde7d5a">wandId</a>);</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span> </div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="a00042.html#ggab24ef720ba130bc53642b696ee375919a601cf31d6b7c28cb9f7956d46add3282">kT5_WandStreamEventType_Disconnect</a>:</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>                    printf(<span class="stringliteral">&quot;WAND EVENT : DISCONNECT [%u]\n&quot;</span>, event.<a class="code hl_variable" href="a03716.html#ae112eeae4695d19c93960ef89dde7d5a">wandId</a>);</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span> </div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="a00042.html#ggab24ef720ba130bc53642b696ee375919abff736b608e692d9ebdd2639fd4c27b3">kT5_WandStreamEventType_Desync</a>:</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>                    printf(<span class="stringliteral">&quot;WAND EVENT : DESYNC [%u]\n&quot;</span>, event.<a class="code hl_variable" href="a03716.html#ae112eeae4695d19c93960ef89dde7d5a">wandId</a>);</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span> </div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="a00042.html#ggab24ef720ba130bc53642b696ee375919a722acef440298a67d4f3402099bfbaa6">kT5_WandStreamEventType_Report</a>:</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>                    printf(<span class="stringliteral">&quot;WAND EVENT : REPORT [%u] %fx%f\n&quot;</span>,</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>                           event.<a class="code hl_variable" href="a03716.html#ae112eeae4695d19c93960ef89dde7d5a">wandId</a>,</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>                           event.<a class="code hl_variable" href="a03716.html#a4daa9f3e7e020aa0fbca181c96e88c4e">report</a>.<a class="code hl_variable" href="a03708.html#ab96bfe844527b6ffce5bd8a88ef0f414">stick</a>.x,</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>                           event.<a class="code hl_variable" href="a03716.html#a4daa9f3e7e020aa0fbca181c96e88c4e">report</a>.<a class="code hl_variable" href="a03708.html#ab96bfe844527b6ffce5bd8a88ef0f414">stick</a>.y);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>            }</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>        }</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>        <span class="comment">// Disable wand stream</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>        config.<a class="code hl_variable" href="a03704.html#a053dd9990c6120b9a6f4057ac5274bfd">enabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>        err            = <a class="code hl_function" href="a00039.html#gae3e5c2929f01f31945dc9b92b1aacd44">t5ConfigureWandStreamForGlasses</a>(glassesHandle, &amp;config);</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>        <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>            printf(<span class="stringliteral">&quot;Failed to disable stream : %s\n&quot;</span>, <a class="code hl_function" href="a00029.html#ga636fd5ec34e9f752d1f7ba5fbd89b636">t5GetResultMessage</a>(err));</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>        }</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    }</div>
<div class="ttc" id="aa00029_html_ga4d7b9c8513e0e08585e0b65b39f4f841"><div class="ttname"><a href="a00029.html#ga4d7b9c8513e0e08585e0b65b39f4f841">T5_TIMEOUT</a></div><div class="ttdeci">#define T5_TIMEOUT</div><div class="ttdoc">Timeout.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00057">errors.h:57</a></div></div>
<div class="ttc" id="aa00039_html_ga923bd9ab4e0b3643968948577ae1d256"><div class="ttname"><a href="a00039.html#ga923bd9ab4e0b3643968948577ae1d256">t5ReadWandStreamForGlasses</a></div><div class="ttdeci">T5_EXPORT T5_Result t5ReadWandStreamForGlasses(T5_Glasses glasses, T5_WandStreamEvent *event, uint32_t timeoutMs)</div><div class="ttdoc">Read from the wands event stream.</div></div>
<div class="ttc" id="aa00039_html_gae3e5c2929f01f31945dc9b92b1aacd44"><div class="ttname"><a href="a00039.html#gae3e5c2929f01f31945dc9b92b1aacd44">t5ConfigureWandStreamForGlasses</a></div><div class="ttdeci">T5_EXPORT T5_Result t5ConfigureWandStreamForGlasses(T5_Glasses glasses, const T5_WandStreamConfig *config)</div><div class="ttdoc">Configure the wand event stream.</div></div>
<div class="ttc" id="aa00042_html_ggab24ef720ba130bc53642b696ee375919a167d45ce1b088d96144f1e6c1874a385"><div class="ttname"><a href="a00042.html#ggab24ef720ba130bc53642b696ee375919a167d45ce1b088d96144f1e6c1874a385">kT5_WandStreamEventType_Connect</a></div><div class="ttdeci">@ kT5_WandStreamEventType_Connect</div><div class="ttdoc">Wand connected.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00321">types.h:321</a></div></div>
<div class="ttc" id="aa00042_html_ggab24ef720ba130bc53642b696ee375919a601cf31d6b7c28cb9f7956d46add3282"><div class="ttname"><a href="a00042.html#ggab24ef720ba130bc53642b696ee375919a601cf31d6b7c28cb9f7956d46add3282">kT5_WandStreamEventType_Disconnect</a></div><div class="ttdeci">@ kT5_WandStreamEventType_Disconnect</div><div class="ttdoc">Wand disconnected.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00324">types.h:324</a></div></div>
<div class="ttc" id="aa00042_html_ggab24ef720ba130bc53642b696ee375919a722acef440298a67d4f3402099bfbaa6"><div class="ttname"><a href="a00042.html#ggab24ef720ba130bc53642b696ee375919a722acef440298a67d4f3402099bfbaa6">kT5_WandStreamEventType_Report</a></div><div class="ttdeci">@ kT5_WandStreamEventType_Report</div><div class="ttdoc">Wand report (Pose, Buttons, Trigger, Stick, Battery)</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00330">types.h:330</a></div></div>
<div class="ttc" id="aa00042_html_ggab24ef720ba130bc53642b696ee375919abff736b608e692d9ebdd2639fd4c27b3"><div class="ttname"><a href="a00042.html#ggab24ef720ba130bc53642b696ee375919abff736b608e692d9ebdd2639fd4c27b3">kT5_WandStreamEventType_Desync</a></div><div class="ttdeci">@ kT5_WandStreamEventType_Desync</div><div class="ttdoc">Stream has desynchronized.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00327">types.h:327</a></div></div>
<div class="ttc" id="aa03704_html"><div class="ttname"><a href="a03704.html">T5_WandStreamConfig</a></div><div class="ttdoc">Wand stream configuration.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00312">types.h:312</a></div></div>
<div class="ttc" id="aa03704_html_a053dd9990c6120b9a6f4057ac5274bfd"><div class="ttname"><a href="a03704.html#a053dd9990c6120b9a6f4057ac5274bfd">T5_WandStreamConfig::enabled</a></div><div class="ttdeci">bool enabled</div><div class="ttdoc">Enable or disable the entire stream. True = enabled.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00314">types.h:314</a></div></div>
<div class="ttc" id="aa03708_html_ab96bfe844527b6ffce5bd8a88ef0f414"><div class="ttname"><a href="a03708.html#ab96bfe844527b6ffce5bd8a88ef0f414">T5_WandReport::stick</a></div><div class="ttdeci">T5_Vec2 stick</div><div class="ttdoc">Stick (X/Y) - Analog, Range [-1.0 - 1.0], 0 = Centered, 1.0 = Top/Right.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00366">types.h:366</a></div></div>
<div class="ttc" id="aa03716_html"><div class="ttname"><a href="a03716.html">T5_WandStreamEvent</a></div><div class="ttdoc">Represents an event from the wand stream.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00404">types.h:404</a></div></div>
<div class="ttc" id="aa03716_html_a4daa9f3e7e020aa0fbca181c96e88c4e"><div class="ttname"><a href="a03716.html#a4daa9f3e7e020aa0fbca181c96e88c4e">T5_WandStreamEvent::report</a></div><div class="ttdeci">T5_WandReport report</div><div class="ttdoc">Report (Valid if type = kT5_WandStreamEventType_Report)</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00415">types.h:415</a></div></div>
<div class="ttc" id="aa03716_html_a824c800c109abedb87324bc998da2cd9"><div class="ttname"><a href="a03716.html#a824c800c109abedb87324bc998da2cd9">T5_WandStreamEvent::type</a></div><div class="ttdeci">T5_WandStreamEventType type</div><div class="ttdoc">Type of event.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00409">types.h:409</a></div></div>
<div class="ttc" id="aa03716_html_ae112eeae4695d19c93960ef89dde7d5a"><div class="ttname"><a href="a03716.html#ae112eeae4695d19c93960ef89dde7d5a">T5_WandStreamEvent::wandId</a></div><div class="ttdeci">T5_WandHandle wandId</div><div class="ttdoc">Opaque identifier for the wand.</div><div class="ttdef"><b>Definition:</b> <a href="a00026_source.html#l00406">types.h:406</a></div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
